export const meta = {
  pub: true,
  title: 'Dead-simple HTML templating',
  date: '2020-07-02T02:20:26Z',
  tags: ['vanilla js'],
};

<h1>{meta.title}</h1>

Our old friend `element.innerHtml = '...'` is great, but sometimes I need more control over the nodes I create, for example, appending multiple child nodes to the same parent, then selectively removing a few later.

For times like these, I reach for my ultra-tiny templating library, powered by tagged template literals and a browser API called `DOMParser`.

```typescript
const template = ({ name, things }) =>
  dom(html`
    <div class="${css.things}">
      <p>Hello ${name}</p>
      <h2>Here are some things:</h2>
      <ul>
        ${things.map((thing) => html`<li>${thing}</li>`)}
      </ul>
    </div>
  `);

const node = template({
  name: 'Mark',
  things: [1, 2, 3, 4],
});

document.getElementById('parent').appendChild(node);
```

The `html` function is an example of a **tagged template literal** - for more info on how they work, check out [Wes Bos' sick intro][bos-ttls].

`dom` parses the raw strings into a DOM Node tree.

### Show me the code!

```typescript
const html = (templateChunks, ...interpolatedValues) => {
  return templateChunks
    .map((chunk, i) => {
      let value = interpolatedValues[i] || '';
      if (Array.isArray(value)) {
        value = value.join('');
      }
      return `${chunk}${value}`;
    })
    .join('');
};

const dom = (text) => {
  const doc = new DOMParser().parseFromString(
    text,
    'text/html',
  );
  return doc.body.firstChild;
};
```

Bonus: If you're a VSCode user, you can use [es6-string-html][vsc-hi] plugin to get inline syntax highlighting for your `html` strings! ðŸ”¥

(And apparently [my website's syntax highlighter][rehype-prism] is smart enough to detect `html`, too! ðŸ¤¯)

[bos-ttls]: https://wesbos.com/tagged-template-literals
[rehype-prism]: https://github.com/mapbox/rehype-prism
[vsc-hi]: https://marketplace.visualstudio.com/items?itemName=Tobermory.es6-string-html
